<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://primefaces.org/ui ">

<h:head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="stylesheet" href="assets/css/main.css"/>
    <title>puk puk 3</title>
    <script>        src = "https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"
    type = "text/javascript"
    charset = "UTF-8"
    </script>
</h:head>

<h:body>
    <header class="header">
        <h1> Zaitseva Irina Sergeevna P3209 95734</h1>
    </header>

    <div class="container">

        <h:form id="user-request">
            <h:outputLabel for="x" value="X:"/>
            <h:inputText
                    id="x"
                    value="#{client.coordinates.x}"
                    required="true"
                    converterMessage="It should be a number"
                    requiredMessage="This is a necessary parameter"
                    readonly="true">
                <f:validator validatorId="formValidator" for="x"/>
            </h:inputText>
            <h:message for="x" styleClass="error"/>

            <p:commandButton value="-5" ajax="true" update="x" action="#{client.updateXWithValue(-5)}">
                <p:ajax update="x"/>
            </p:commandButton>
            <p:commandButton value="-4" ajax="true" update="x" action="#{client.updateXWithValue(-4)}">
                <p:ajax update="x"/>
            </p:commandButton>
            <p:commandButton value="-3" ajax="true" update="x" action="#{client.updateXWithValue(-3)}">
                <p:ajax update="x"/>
            </p:commandButton>
            <p:commandButton value="-2" ajax="true" update="x" action="#{client.updateXWithValue(-2)}">
                <p:ajax update="x"/>
            </p:commandButton>
            <p:commandButton value="-1" ajax="true" update="x" action="#{client.updateXWithValue(-1)}">
                <p:ajax update="x"/>
            </p:commandButton>
            <p:commandButton value="0" ajax="true" update="x" action="#{client.updateXWithValue(0)}">
                <p:ajax update="x"/>
            </p:commandButton>
            <p:commandButton value="1" ajax="true" update="x" action="#{client.updateXWithValue(1)}">
                <p:ajax update="x"/>
            </p:commandButton>
            <p:commandButton value="2" ajax="true" update="x" action="#{client.updateXWithValue(2)}">
                <p:ajax update="x"/>
            </p:commandButton>
            <p:commandButton value="3" ajax="true" update="x" action="#{client.updateXWithValue(3)}">
                <p:ajax update="x"/>
            </p:commandButton>


            <p>
                <label for="y">Y: </label>
                <h:inputText
                        id="y"
                        value="#{client.coordinates.y}"
                        required="true"
                        converterMessage="It should be a number"
                        requiredMessage="This is a necessary parameter">
                    <f:validator validatorId="formValidator" for="y"/>
                </h:inputText>
                <h:message for="y" styleClass="error"/>
            </p>

            <p>
                <h:outputLabel for="r" value="R:"/>
                <p:inputText id="r"
                             required="true"
                             requiredMessage="This is a necessary parameter"
                             validatorMessage="The value must be from 2 to 5"
                             value="#{client.coordinates.r}"
                             minValue="2" maxValue="5"
                             readonly="true"

                >
                    <f:validator validatorId="formValidator" for="r"/>
                </p:inputText>
                <p:slider for="r" minValue="2" maxValue="5" step="0.1" range="false"
                          style="width:200px; background-color: blueviolet"
                          id="slider"
                          onSlideEnd="updateR(PF('yourFormId:slider').getValue())"/>
                <h:message for="r" styleClass="error"/>
            </p>


            <h:commandButton value="Make Remote Request" action="#{client.makeRemoteRequest}"/>


        </h:form>
        <h:form styleClass="navigate">
            <h:commandButton action="navigateStart" styleClass="button" value="to start page"/>
        </h:form>


        <p:remoteCommand name="addDotFromCanvas" action="#{client.makeCanvasRequest()}" update="results-table"
                         process="@this"/>


        <!--
           Table with previous hits
        -->
        <h:dataTable id="results-table" value="#{client.currentHits}" var="hit"
                     columnClasses="x-column,y-column,r-column,time-column,res-column">
            <h:column>
                <f:facet name="header">X</f:facet>
                <h:outputText value="#{hit.x}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Y</f:facet>
                <h:outputText value="#{hit.y}"/>
            </h:column>
            <h:column>
                <f:facet name="header">R</f:facet>
                <h:outputText value="#{hit.r}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Current Time</f:facet>
                <h:outputText value="#{hit.currentTime}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Result</f:facet>
                <h:outputText value="#{hit.result ? 'kill' : 'miss'}"
                              styleClass="#{hit.result ? 'text-green' : 'text-red'}"/>
            </h:column>
        </h:dataTable>


        <div class="graph-canvas">
            <canvas width="517" height="520" id="coordinateCanvas">
            </canvas>
        </div>

    </div>

    <h:outputScript library="js" name="graph.js"></h:outputScript>

</h:body>

</html>